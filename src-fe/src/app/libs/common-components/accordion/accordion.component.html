<mat-accordion class="radar-accordion" [class.radar-accordion--dark-theme]="isDarkTheme">

	<mat-expansion-panel
		*ngFor="let item of items"
		(opened)="item.opened = true"
		(closed)="item.opened = false"
		hideToggle="true"
		[expanded]="item.opened">

		<mat-expansion-panel-header>

			<mat-panel-title class="accordion-item">

				<div class="accordion-item__colored-mark" [ngStyle]="{ 'background-color': item.color }"></div>

				{{ item.title }}

				<span class="accordion-item__counter"> ({{ item.children?.length }})</span>

			</mat-panel-title>

			<mat-panel-description>
				<app-icon
					class="accordion-item__toggle"
					icon="arrow-down"
					[class.accordion-item__toggle--rotated]="item.opened"></app-icon>
			</mat-panel-description>

		</mat-expansion-panel-header>

		<div class="accordion-subitem" *ngFor="let subItem of item.children; index as i"
			(click)="emitSubItemClick(subItem.id)">
			<div class="accordion-subitem__content">
				<span class="accordion-subitem__index">{{ subItem.number }}</span><span class="accordion-subitem__title">{{ subItem.title }}</span>
			</div>
		</div>

	</mat-expansion-panel>

</mat-accordion>
